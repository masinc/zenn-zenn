---
title: "WSLg(Ubuntu 24.04) ã§ æ—¥æœ¬èªã‚’æ‰±ãˆã‚‹ç’°å¢ƒã‚’ä½œã‚‹"
emoji: "ğŸ·"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["wsl"]
published: true
---

ç©ºã® Ubuntu 24.04 ã‹ã‚‰ WSLg ã§æ—¥æœ¬èªã‚’æ‰±ãˆã‚‹ç’°å¢ƒã‚’ä½œã‚‹æ‰‹é †ã‚’ã¾ã¨ã‚ã¾ã™ã€‚

æ—¥æœ¬èªã‚’æ‰±ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã¯ã€ä¸»ã« 3 ã¤ã®è¨­å®šãŒå¿…è¦ã§ã™ã€‚

1. æ—¥æœ¬èªã®ãƒ­ã‚±ãƒ¼ãƒ«ã‚’è¨­å®šã™ã‚‹
2. ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æ—¥æœ¬èªã«è¨­å®šã™ã‚‹
3. IME ã‚’è¨­å®šã™ã‚‹

Shell ã¯ `bash` ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

## Ubuntu 24.04 ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ã¾ãšã¯ `wsl` ã‚³ãƒãƒ³ãƒ‰ã§ Ubuntu 24.04 ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```bash
wsl --install -d Ubuntu-24.04
```

ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¨ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚’è¡Œã„ã¾ã™ã€‚

```bash
sudo apt update && sudo apt upgrade -y
```

## æ—¥æœ¬èªã®ãƒ­ã‚±ãƒ¼ãƒ«ã‚’è¨­å®šã™ã‚‹

æ—¥æœ¬èªã®ãƒ­ã‚±ãƒ¼ãƒ«ã‚’è¨­å®šã—ã¾ã™ã€‚

```bash
sudo apt install language-pack-ja
sudo update-locale LANG=ja_JP.UTF-8
```

## ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æ—¥æœ¬èªã«è¨­å®šã™ã‚‹

ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æ—¥æœ¬èªã«è¨­å®šã—ã¾ã™ã€‚

```bash
sudo apt install x11-xkb-utils
setxkbmap -layout jp
```

setxkbmap ã¯ WARNING ãŒå‡ºã¾ã™ãŒã€ç„¡è¦–ã—ã¦å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚

```
WARNING: Running setxkbmap against an Xwayland server
```

setxkbmap ã¯ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒçµ‚äº†ã™ã‚‹ã¨è¨­å®šãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹ãŸã‚ã€`.bashrc`
ã«è¿½è¨˜ã—ã¦æ°¸ç¶šåŒ–ã—ã¾ã™ã€‚

```bash
echo 'setxkbmap -layout jp 2>dev/null' >> ~/.bashrc
```

## IME ã‚’è¨­å®šã™ã‚‹

fcity5 ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```bash
sudo apt install fcitx5-mozc
```

im-config ã‚’å®Ÿè¡Œã—ã¦ã€fcitx5 ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® IME ã«è¨­å®šã—ã¾ã™ã€‚

```bash
im-config -n fcitx5
```

`.bashrc` ã«ã‚‚è¿½è¨˜ã—ã¾ã™ã€‚

```bash
cat <<EOF >> ~/.bashrc
export GTK_IM_MODULE=fcitx5
export QT_IM_MODULE=fcitx5
export XMODIFIERS=@im=fcitx5
export DefaultIMModule=fcitx5
export INPUT_METHOD=fcitx5
if [ $SHLVL -eq 1 ]; then
  (fcitx5 --disable=wayland -d --verbose '*'=0 &)
fi
EOF
```

ã„ã£ãŸã‚“ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã—ç›´ã™ã¨ã€IME ãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã™ã€‚

### fcitx5 ã®è¨­å®š

é©å½“ãªæ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆã‚’å°å…¥ã—ã¾ã™ã€‚(ã“ã“ã§ã¯ Noto CJK JP ã‚’ä½¿ç”¨ã—ã¾ã™)

```bash
sudo apt install fonts-noto-cjk
```

fcity5 ã®è¨­å®šã‚’ã—ã¾ã™ã€‚

```bash
fcitx5-configtool
```

![fcitxã®è¨­å®š](/images/2a84f489-a894-46d3-a604-df1119459773.png)

Mozc ã‚’ä¸€ç•ªä¸Šã«ç§»å‹•ã—ã¾ã™ã€‚

![Mozcã®ç§»å‹•](/images/fdc9deb5-9030-4ee0-8a2a-faf75544ef32.png)

---

ã€ã‚¢ãƒ‰ã‚ªãƒ³ã€ã‚¿ãƒ–ã®ã€ã‚¯ãƒ©ã‚·ãƒƒã‚¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€ã®è¨­å®šã‚’é–‹ãã¾ã™ã€‚

![ã‚¯ãƒ©ã‚·ãƒƒã‚¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®è¨­å®š](/images/453a5f29-6390-4b48-bfdd-c639671827d5.png)

ãƒ•ã‚©ãƒ³ãƒˆã‚’æ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆã«è¨­å®šã—ã¾ã™ã€‚

![ãƒ•ã‚©ãƒ³ãƒˆã®è¨­å®š](/images/37cc8ee8-f294-4f97-96ea-325593a3a4ee.png)

OK ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦è¨­å®šã‚’ä¿å­˜ã—ã¾ã™ã€‚

## å‹•ä½œç¢ºèª

ã“ã“ã§ã¯ gnome-text-editor ã‚’èµ·å‹•ã—ã¦ã€æ—¥æœ¬èªå…¥åŠ›ãŒã§ãã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚

```bash
sudo apt install gnome-text-editor
gnome-text-editor
```

![gnome-text-editor](/images/531d766c-358e-46cf-a04a-5655e948f3da.png)

## å‚è€ƒ

https://www.pokotenote.com/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0/2024/07/02/wslg-fcitx.html

https://scrapbox.io/programming-notes/WSLg%E3%81%A7keyboard_layout%E3%82%92%E6%97%A5%E6%9C%AC%E8%AA%9E%E9%85%8D%E5%88%97%E3%81%AB%E3%81%99%E3%82%8B

https://astherier.com/blog/2021/07/windows11-wsl2-wslg-japanese/
