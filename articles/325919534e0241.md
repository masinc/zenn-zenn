---
title: "CDK „Åß ECS„Åß EC2(ASG) „É™„ÇΩ„Éº„Çπ‰ΩøÁî®ÊôÇ„ÅÆÂçò‰Ωì„ÉÜ„Çπ„Éà„ÅßÁô∫Áîü„Åó„Åü„Ç®„É©„Éº„Å®„Åù„ÅÆËß£Ê±∫ÊñπÊ≥ï"
emoji: "üêï"
type: "tech" # tech: ÊäÄË°ìË®ò‰∫ã / idea: „Ç¢„Ç§„Éá„Ç¢
topics: [cdk, ecs, asg]
published: true
---

CDK „Çí‰Ωø„Å£„Å¶ ECS „É™„ÇΩ„Éº„Çπ„ÅÆ„É¶„Éã„ÉÉ„Éà„ÉÜ„Çπ„Éà„ÇíË°å„ÅÜÈöõ„Å´ÈÅ≠ÈÅá„Åó„Åü„Ç®„É©„Éº„Å®„Åù„ÅÆËß£Ê±∫ÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶Ë®òËºâ„Åó„Åæ„Åô„ÄÇ

„Åæ„Åö„ÄÅ„Ç®„É©„Éº„ÅÆÂÜÖÂÆπ„Åß„Åô„Åå„ÄÅ„ÉÜ„Çπ„ÉàÂÆüË°åÊôÇ„Å´‰ª•‰∏ã„ÅÆ„Ç®„É©„Éº„É°„ÉÉ„Çª„Éº„Ç∏„ÅåÂá∫Âäõ„Åï„Çå„Åæ„Åó„Åü„ÄÇ

```
The provided launch template does not expose its user data
```

„Åì„ÅÆ„Ç®„É©„Éº„ÅØ„ÄÅECS „ÅÆ AsgAutoScalingGroup „ÅÆËµ∑Âãï„ÉÜ„É≥„Éó„É¨„Éº„Éà( LaunchTemplate )„Å´ UserData „ÅåÊåáÂÆö„Åï„Çå„Å¶„ÅÑ„Å™„Åã„Å£„Åü„Åì„Å®„ÅåÂéüÂõ†„Åß„Åó„Åü„ÄÇ

‰ª•‰∏ã„Å´„ÄÅ„Ç®„É©„Éº„ÅåÂÜçÁèæ„Åô„Çã„Ç≥„Éº„Éâ‰æã„Åß„Åô„ÄÇ

```typescript
const asgLaunchTemplate = new ec2.LaunchTemplate(this, 'ASG-LaunchTemplate', {
    instanceType: new ec2.InstanceType('t3.medium'),
    machineImage: ecs.EcsOptimizedImage.amazonLinux2(),
});
```

„Åì„ÅÆ„Ç≥„Éº„Éâ„ÅØ UserData „ÅåÊåáÂÆö„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑ„Åü„ÇÅ„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åô„ÄÇ‰øÆÊ≠£„Åô„Çã„Å´„ÅØ UserData „ÅÆÂÄ§„ÇíÊåáÂÆö„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ

```typescript
const asgLaunchTemplate = new ec2.LaunchTemplate(this, 'ASG-LaunchTemplate', {
    instanceType: new ec2.InstanceType('t3.medium'),
    machineImage: ecs.EcsOptimizedImage.amazonLinux2(),
    userData: ec2.UserData.forLinux(), // ËøΩÂä†
});
```

„Åì„Çå„Å´„Çà„Çä„ÄÅ„Ç®„É©„Éº„ÅØËß£Ê±∫„Åó„Åæ„Åó„Åü„ÄÇ

AWS CDK „ÅÆÂÖ¨Âºè„Éâ„Ç≠„É•„É°„É≥„ÉàÂÜÖ„Åß„ÇÇ AsgCapacityProvider ÂºïÊï∞„Å´ LaunchTemplate „Çí‰ΩøÁî®„Åô„ÇãÂ†¥Âêà„Å´„ÅØ„ÄÅLaunchTemplate „Å´ userData „ÇíÊåáÂÆö„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çã„Å®Ë®òËºâ„Åï„Çå„Å¶„ÅÑ„Åæ„Åó„Åü„ÄÇ

> To use LaunchTemplate with AsgCapacityProvider, make sure to specify the userData in the LaunchTemplate:

https://docs.aws.amazon.com/cdk/api/v2/docs/aws-cdk-lib.aws_ecs-readme.html#clusters



## ÂèÇËÄÉ

https://github.com/aws/aws-cdk/issues/20870
https://docs.aws.amazon.com/cdk/api/v2/docs/aws-cdk-lib.aws_ecs-readme.html
